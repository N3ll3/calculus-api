version: '3.7'

volumes:
    logs:
        driver: local
          
services:
    php:
        build: './php/'
        networks:
        - backend
        volumes:
        - ./public_html/:/var/www/html/
    apache:
        build: './apache/'
        depends_on:
        - php
        - mysql
        networks:
        - frontend
        - backend
        ports:
        - "8080:80"
        volumes:
        - ./public_html/:/var/www/html/
    mysql:
        image: mysql:5.6.40
        networks:
        - backend
        environment:
        - MYSQL_ROOT_PASSWORD=rootpassword

    slim:
        image: php:7-alpine
        working_dir: /var/www
        command: php -S 0.0.0.0:8080 -t public
        environment:
            docker: "true"
        ports:
            - 8080:8080
        volumes:
            - .:/var/www
            - logs:/var/www/logs
networks:
  frontend:
  backend: